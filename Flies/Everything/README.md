# 文件搜索工具 - Everything (增强版)

一个功能强大的文件搜索和索引工具，类似于Everything软件，具有轻量级数据库和详细的文件属性系统。

## 🚀 新功能特点

### 💾 数据存储
- **轻量级SQLite数据库**: 索引数据存储在`data`文件夹中
- **持久化存储**: 索引数据在程序重启后仍然保留
- **最小资源使用**: 优化的数据库查询和内存管理
- **实时更新**: 支持增量索引和实时数据更新

### 📊 文件属性系统
支持详细的文件属性提取和显示：

#### 基本属性
- **文件大小**: 实际大小和在磁盘上的大小
- **时间信息**: 创建时间、修改时间、访问时间
- **文件属性**: 隐藏、只读、系统文件等
- **路径信息**: 文件名长度、路径长度、扩展名
- **哈希值**: 小文件的MD5哈希值（用于重复文件检测）

#### 特定文件类型属性
- **图片文件**: 尺寸、格式、颜色模式、位深度
- **音频文件**: 时长、比特率、采样率、声道数
- **视频文件**: 帧率、帧数、分辨率、时长
- **文档文件**: 行数、字数、字符数（文本文件）

### 🔍 高级搜索和排序功能
- **属性搜索**: 按文件属性进行搜索
- **属性排序**: 按任意属性进行排序
- **属性筛选**: 按属性值进行筛选
- **重复文件检测**: 基于哈希值的重复文件查找
- **高级排序**: 支持15种不同属性的排序
- **排序指示器**: 显示当前排序方向和列

## 功能特点

### 🎯 核心功能
- **快速文件索引**: 扫描指定目录下的所有文件
- **实时搜索**: 输入关键词即时显示搜索结果
- **多维度筛选**: 支持文件类型、大小等筛选条件
- **智能排序**: 点击列标题进行正序/逆序排列
- **文件信息显示**: 显示文件名、路径、大小、类型、修改时间、创建时间

### 📁 文件类型筛选
- **音频**: mp3, wav, flac, aac, ogg, wma, m4a, aiff
- **压缩文件**: zip, rar, 7z, tar, gz, bz2, xz, lzma
- **文档**: txt, doc, docx, pdf, rtf, odt, xls, xlsx, ppt, pptx
- **可执行文件**: exe, msi, bat, cmd, com, scr
- **图片**: jpg, jpeg, png, gif, bmp, tiff, svg, webp, ico
- **视频**: mp4, avi, mkv, mov, wmv, flv, webm, m4v, 3gp
- **其他**: 未分类的文件类型

### 📊 大小筛选
- 小于1MB
- 1MB-10MB
- 10MB-100MB
- 大于100MB

## 使用方法

### 1. 启动程序
双击 `start_everything.bat` 或在命令行运行：
```bash
python everything.py
```

### 2. 选择索引目录
1. 点击菜单栏 "文件" → "选择索引目录"
2. 选择要搜索的根目录
3. 点击 "开始索引" 按钮

### 3. 搜索文件
- **关键词搜索**: 在搜索框中输入文件名关键词
- **类型筛选**: 选择文件类型进行筛选
- **大小筛选**: 选择文件大小范围

### 4. 查看文件属性
- 点击文件列表中的项目，右侧属性面板会显示详细信息
- 包括基本属性、特定文件类型属性等

### 5. 数据库管理
- 点击菜单栏 "工具" → "数据库管理"
- 查看数据库统计信息
- 清空数据库或重新索引

### 6. 高级排序
- 点击菜单栏 "工具" → "高级排序"
- 选择排序属性和方向
- 支持15种不同属性的排序

### 7. 属性查看器
- 点击菜单栏 "工具" → "属性查看器"
- 查看所有文件的属性统计
- 分析文件类型分布

### 8. 排序和查看
- 点击列标题进行排序（文件名、路径、大小、类型、修改时间、创建时间、文件名长度、属性、哈希值）
- 排序方向指示器显示当前排序状态
- 双击文件列表中的项目可直接打开文件

### 8. 导出结果
- 点击菜单栏 "文件" → "导出结果"
- 选择保存位置，结果将导出为CSV格式

## 界面说明

### 菜单栏
- **文件菜单**: 选择索引目录、重新索引、导出结果、退出
- **工具菜单**: 高级排序、数据库管理、属性查看器、设置、关于

### 工具栏
- **开始索引**: 开始扫描指定目录
- **停止索引**: 停止当前索引过程
- **数据库信息**: 显示当前索引的文件数量
- **进度条**: 显示索引进度

### 搜索区域
- **关键词输入框**: 输入搜索关键词
- **文件类型筛选**: 选择文件类型
- **大小筛选**: 选择文件大小范围

### 文件列表
显示搜索结果的详细信息：
- 文件名
- 完整路径
- 文件大小
- 文件类型
- 修改时间
- 创建时间
- 文件名长度
- 文件属性
- 哈希值

### 属性面板
显示选中文件的详细属性：
- 基本文件信息
- 文件属性（隐藏、只读等）
- 特定文件类型的属性
- 哈希值（小文件）

### 状态栏
显示当前操作状态和结果数量

## 数据存储

### 数据库结构
程序使用SQLite数据库存储索引数据，位于`data`文件夹中：

```
data/
├── files.db          # 主数据库文件
├── file_index.pkl    # 文件索引缓存
└── properties.pkl    # 属性数据缓存
```

### 数据库表结构
- **files表**: 存储文件基本信息
- **properties表**: 存储文件属性信息

## 系统要求

- Python 3.6+
- tkinter (通常随Python一起安装)
- Windows 操作系统

### 可选依赖
为了获得更好的属性提取功能，可以安装以下包：
```bash
pip install pywin32 pillow mutagen opencv-python
```

## 注意事项

1. **权限问题**: 某些系统目录可能需要管理员权限才能访问
2. **性能考虑**: 大型目录的索引可能需要较长时间
3. **内存使用**: 大量文件会占用较多内存
4. **文件访问**: 某些文件可能因权限或占用而无法访问
5. **属性提取**: 某些文件类型的属性提取可能需要额外依赖包

## 技术特点

- **轻量级数据库**: 使用SQLite进行高效的数据存储和查询
- **多线程索引**: 使用后台线程进行文件索引，不阻塞界面
- **实时过滤**: 搜索和筛选结果实时更新
- **属性系统**: 详细的文件属性提取和显示
- **设置保存**: 自动保存索引目录等设置
- **错误处理**: 完善的异常处理机制
- **用户友好**: 直观的图形界面和操作提示

## 版本信息

- 版本: 2.0 (增强版)
- 开发语言: Python
- GUI框架: tkinter
- 数据库: SQLite
- 支持平台: Windows 